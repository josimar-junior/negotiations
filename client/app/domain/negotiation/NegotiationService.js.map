{"version":3,"sources":["../../../app-src/domain/negotiation/NegotiationService.js"],"names":["HttpService","Negotiation","NegotiantionService","constructor","_httpService","getWeekNegotiations","get","then","datas","map","object","Date","date","quantity","value","error","Error","getPreviousWeekNegotiations","getDelayedWeekNegotiations","getNegotiationsForThePeriod","Promise","all","period","reduce","newArray","item","concat","sort","object1","object2","getTime","catch","console","log"],"mappings":";;;;;;AAASA,uB,sBAAAA,W;;AACAC,uB,kBAAAA,W;;;AAEF,kBAAMC,mBAAN,CAA0B;;AAE7BC,8BAAc;AACV,yBAAKC,YAAL,GAAoB,IAAIJ,WAAJ,EAApB;AACH;;AAEDK,sCAAsB;AAClB,2BAAO,KAAKD,YAAL,CAAkBE,GAAlB,CAAsB,mBAAtB,EACFC,IADE,CACGC,SACFA,MAAMC,GAAN,CAAUC,UAAU,IAAIT,WAAJ,CAAgB,IAAIU,IAAJ,CAASD,OAAOE,IAAhB,CAAhB,EAAuCF,OAAOG,QAA9C,EAAwDH,OAAOI,KAA/D,CAApB,CAFD,EAGGC,SAAS;AAAE,8BAAM,IAAIC,KAAJ,CAAU,gCAAV,CAAN;AAAmD,qBAHjE,CAAP;AAIH;;AAEDC,8CAA8B;AAC1B,2BAAO,KAAKb,YAAL,CAAkBE,GAAlB,CAAsB,uBAAtB,EACFC,IADE,CACGC,SACFA,MAAMC,GAAN,CAAUC,UAAU,IAAIT,WAAJ,CAAgB,IAAIU,IAAJ,CAASD,OAAOE,IAAhB,CAAhB,EAAuCF,OAAOG,QAA9C,EAAwDH,OAAOI,KAA/D,CAApB,CAFD,EAGGC,SAAS;AAAE,8BAAM,IAAIC,KAAJ,CAAU,yCAAV,CAAN;AAA4D,qBAH1E,CAAP;AAIH;;AAEDE,6CAA6B;AACzB,2BAAO,KAAKd,YAAL,CAAkBE,GAAlB,CAAsB,sBAAtB,EACFC,IADE,CACGC,SACFA,MAAMC,GAAN,CAAUC,UAAU,IAAIT,WAAJ,CAAgB,IAAIU,IAAJ,CAASD,OAAOE,IAAhB,CAAhB,EAAuCF,OAAOG,QAA9C,EAAwDH,OAAOI,KAA/D,CAApB,CAFD,EAGGC,SAAS;AAAE,8BAAM,IAAIC,KAAJ,CAAU,wCAAV,CAAN;AAA2D,qBAHzE,CAAP;AAIH;;AAEDG,8CAA8B;AAC1B,2BAAOC,QAAQC,GAAR,CAAY,CACf,KAAKhB,mBAAL,EADe,EAEf,KAAKY,2BAAL,EAFe,EAGf,KAAKC,0BAAL,EAHe,CAAZ,EAKFX,IALE,CAKGe,UACFA,OAAOC,MAAP,CAAc,CAACC,QAAD,EAAWC,IAAX,KAAoBD,SAASE,MAAT,CAAgBD,IAAhB,CAAlC,EAAyD,EAAzD,EACKE,IADL,CACU,CAACC,OAAD,EAAUC,OAAV,KAAsBA,QAAQjB,IAAR,CAAakB,OAAb,KAAyBF,QAAQhB,IAAR,CAAakB,OAAb,EADzD,CAND,EAQDC,KARC,CAQKhB,SAAS;AACbiB,gCAAQC,GAAR,CAAYlB,KAAZ;AACA,8BAAM,IAAIC,KAAJ,CAAU,0CAAV,CAAN;AACH,qBAXE,CAAP;AAYH;AAxC4B","file":"NegotiationService.js","sourcesContent":["import { HttpService } from '../../util/HttpService.js';\nimport { Negotiation } from './Negotiation.js';\n\nexport class NegotiantionService {\n\n    constructor() {\n        this._httpService = new HttpService();\n    }\n\n    getWeekNegotiations() {\n        return this._httpService.get('negotiations/week')\n            .then(datas =>\n                datas.map(object => new Negotiation(new Date(object.date), object.quantity, object.value))\n                , error => { throw new Error(\"Couldn't get week negotiations\") })\n    }\n\n    getPreviousWeekNegotiations() {\n        return this._httpService.get('negotiations/previous')\n            .then(datas =>\n                datas.map(object => new Negotiation(new Date(object.date), object.quantity, object.value))\n                , error => { throw new Error(\"Couldn't get previous week negotiations\") });\n    }\n\n    getDelayedWeekNegotiations() {\n        return this._httpService.get('negotiations/delayed')\n            .then(datas =>\n                datas.map(object => new Negotiation(new Date(object.date), object.quantity, object.value))\n                , error => { throw new Error(\"Couldn't get delayed week negotiations\") });\n    }\n\n    getNegotiationsForThePeriod() {\n        return Promise.all([\n            this.getWeekNegotiations(),\n            this.getPreviousWeekNegotiations(),\n            this.getDelayedWeekNegotiations()\n        ])\n            .then(period =>\n                period.reduce((newArray, item) => newArray.concat(item), [])\n                    .sort((object1, object2) => object2.date.getTime() - object1.date.getTime())\n            ).catch(error => {\n                console.log(error);\n                throw new Error(\"Couldn't get negotiations for the period\");\n            });\n    }\n}"]}