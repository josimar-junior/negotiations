{"version":3,"sources":["../../../app-src/domain/negotiation/NegotiationService.js"],"names":["HttpService","Negotiation","NegotiantionService","constructor","_httpService","getWeekNegotiations","get","then","datas","map","object","Date","date","quantity","value","error","Error","getPreviousWeekNegotiations","getDelayedWeekNegotiations","getNegotiationsForThePeriod","period","Promise","all","reduce","newArray","item","concat","sort","object1","object2","getTime","console","log","err"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,uB,sBAAAA,W;;AACAC,uB,kBAAAA,W;;;AAEF,kBAAMC,mBAAN,CAA0B;;AAE7BC,8BAAc;AACV,yBAAKC,YAAL,GAAoB,IAAIJ,WAAJ,EAApB;AACH;;AAEDK,sCAAsB;AAClB,2BAAO,KAAKD,YAAL,CAAkBE,GAAlB,CAAsB,mBAAtB,EACFC,IADE,CACGC,SACFA,MAAMC,GAAN,CAAUC,UAAU,IAAIT,WAAJ,CAAgB,IAAIU,IAAJ,CAASD,OAAOE,IAAhB,CAAhB,EAAuCF,OAAOG,QAA9C,EAAwDH,OAAOI,KAA/D,CAApB,CAFD,EAGGC,SAAS;AAAE,8BAAM,IAAIC,KAAJ,CAAU,gCAAV,CAAN;AAAmD,qBAHjE,CAAP;AAIH;;AAEDC,8CAA8B;AAC1B,2BAAO,KAAKb,YAAL,CAAkBE,GAAlB,CAAsB,uBAAtB,EACFC,IADE,CACGC,SACFA,MAAMC,GAAN,CAAUC,UAAU,IAAIT,WAAJ,CAAgB,IAAIU,IAAJ,CAASD,OAAOE,IAAhB,CAAhB,EAAuCF,OAAOG,QAA9C,EAAwDH,OAAOI,KAA/D,CAApB,CAFD,EAGGC,SAAS;AAAE,8BAAM,IAAIC,KAAJ,CAAU,yCAAV,CAAN;AAA4D,qBAH1E,CAAP;AAIH;;AAEDE,6CAA6B;AACzB,2BAAO,KAAKd,YAAL,CAAkBE,GAAlB,CAAsB,sBAAtB,EACFC,IADE,CACGC,SACFA,MAAMC,GAAN,CAAUC,UAAU,IAAIT,WAAJ,CAAgB,IAAIU,IAAJ,CAASD,OAAOE,IAAhB,CAAhB,EAAuCF,OAAOG,QAA9C,EAAwDH,OAAOI,KAA/D,CAApB,CAFD,EAGGC,SAAS;AAAE,8BAAM,IAAIC,KAAJ,CAAU,wCAAV,CAAN;AAA2D,qBAHzE,CAAP;AAIH;;AAEKG,2CAAN,GAAoC;AAAA;;AAAA;AAChC,4BAAI;AACA,gCAAIC,SAAS,MAAMC,QAAQC,GAAR,CAAY,CAC3B,MAAKjB,mBAAL,EAD2B,EAE3B,MAAKY,2BAAL,EAF2B,EAG3B,MAAKC,0BAAL,EAH2B,CAAZ,CAAnB;AAKA,mCAAOE,OAAOG,MAAP,CAAc,UAACC,QAAD,EAAWC,IAAX;AAAA,uCACjBD,SAASE,MAAT,CAAgBD,IAAhB,CADiB;AAAA,6BAAd,EACoB,EADpB,EAEFE,IAFE,CAEG,UAACC,OAAD,EAAUC,OAAV;AAAA,uCAAsBA,QAAQjB,IAAR,CAAakB,OAAb,KAAyBF,QAAQhB,IAAR,CAAakB,OAAb,EAA/C;AAAA,6BAFH,CAAP;AAGH,yBATD,CASE,OAAOf,KAAP,EAAc;AACZgB,oCAAQC,GAAR,CAAYC,GAAZ;AACA,kCAAM,IAAIjB,KAAJ,CAAU,0CAAV,CAAN;AACH;AAb+B;AAcnC;AAzC4B","file":"NegotiationService.js","sourcesContent":["import { HttpService } from '../../util/HttpService.js';\nimport { Negotiation } from './Negotiation.js';\n\nexport class NegotiantionService {\n\n    constructor() {\n        this._httpService = new HttpService();\n    }\n\n    getWeekNegotiations() {\n        return this._httpService.get('negotiations/week')\n            .then(datas =>\n                datas.map(object => new Negotiation(new Date(object.date), object.quantity, object.value))\n                , error => { throw new Error(\"Couldn't get week negotiations\") })\n    }\n\n    getPreviousWeekNegotiations() {\n        return this._httpService.get('negotiations/previous')\n            .then(datas =>\n                datas.map(object => new Negotiation(new Date(object.date), object.quantity, object.value))\n                , error => { throw new Error(\"Couldn't get previous week negotiations\") });\n    }\n\n    getDelayedWeekNegotiations() {\n        return this._httpService.get('negotiations/delayed')\n            .then(datas =>\n                datas.map(object => new Negotiation(new Date(object.date), object.quantity, object.value))\n                , error => { throw new Error(\"Couldn't get delayed week negotiations\") });\n    }\n\n    async getNegotiationsForThePeriod() {\n        try {\n            let period = await Promise.all([\n                this.getWeekNegotiations(),\n                this.getPreviousWeekNegotiations(),\n                this.getDelayedWeekNegotiations()\n            ]);\n            return period.reduce((newArray, item) => \n                newArray.concat(item), [])\n                .sort((object1, object2) => object2.date.getTime() - object1.date.getTime());\n        } catch (error) {\n            console.log(err);\n            throw new Error(\"Couldn't get negotiations for the period\");\n        }\n    }\n}"]}