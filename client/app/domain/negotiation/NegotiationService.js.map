{"version":3,"sources":["../../../app-src/domain/negotiation/NegotiationService.js"],"names":["HttpService","Negotiation","ApplicationException","NegotiantionService","constructor","_httpService","getWeekNegotiations","get","then","datas","map","object","Date","date","quantity","value","error","getPreviousWeekNegotiations","getDelayedWeekNegotiations","getNegotiationsForThePeriod","period","Promise","all","reduce","newArray","item","concat","sort","object1","object2","getTime","console","log","err"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,uB,sBAAAA,W;;AACAC,uB,kBAAAA,W;;AACAC,gC,+BAAAA,oB;;;AAEF,kBAAMC,mBAAN,CAA0B;;AAE7BC,8BAAc;AACV,yBAAKC,YAAL,GAAoB,IAAIL,WAAJ,EAApB;AACH;;AAEDM,sCAAsB;AAClB,2BAAO,KAAKD,YAAL,CAAkBE,GAAlB,CAAsB,mBAAtB,EACFC,IADE,CACGC,SACFA,MAAMC,GAAN,CAAUC,UAAU,IAAIV,WAAJ,CAAgB,IAAIW,IAAJ,CAASD,OAAOE,IAAhB,CAAhB,EAAuCF,OAAOG,QAA9C,EAAwDH,OAAOI,KAA/D,CAApB,CAFD,EAGGC,SAAS;AAAE,8BAAM,IAAId,oBAAJ,CAAyB,gCAAzB,CAAN;AAAkE,qBAHhF,CAAP;AAIH;;AAEDe,8CAA8B;AAC1B,2BAAO,KAAKZ,YAAL,CAAkBE,GAAlB,CAAsB,uBAAtB,EACFC,IADE,CACGC,SACFA,MAAMC,GAAN,CAAUC,UAAU,IAAIV,WAAJ,CAAgB,IAAIW,IAAJ,CAASD,OAAOE,IAAhB,CAAhB,EAAuCF,OAAOG,QAA9C,EAAwDH,OAAOI,KAA/D,CAApB,CAFD,EAGGC,SAAS;AAAE,8BAAM,IAAId,oBAAJ,CAAyB,yCAAzB,CAAN;AAA2E,qBAHzF,CAAP;AAIH;;AAEDgB,6CAA6B;AACzB,2BAAO,KAAKb,YAAL,CAAkBE,GAAlB,CAAsB,sBAAtB,EACFC,IADE,CACGC,SACFA,MAAMC,GAAN,CAAUC,UAAU,IAAIV,WAAJ,CAAgB,IAAIW,IAAJ,CAASD,OAAOE,IAAhB,CAAhB,EAAuCF,OAAOG,QAA9C,EAAwDH,OAAOI,KAA/D,CAApB,CAFD,EAGGC,SAAS;AAAE,8BAAM,IAAId,oBAAJ,CAAyB,wCAAzB,CAAN;AAA0E,qBAHxF,CAAP;AAIH;;AAEKiB,2CAAN,GAAoC;AAAA;;AAAA;AAChC,4BAAI;AACA,gCAAIC,SAAS,MAAMC,QAAQC,GAAR,CAAY,CAC3B,MAAKhB,mBAAL,EAD2B,EAE3B,MAAKW,2BAAL,EAF2B,EAG3B,MAAKC,0BAAL,EAH2B,CAAZ,CAAnB;AAKA,mCAAOE,OAAOG,MAAP,CAAc,UAACC,QAAD,EAAWC,IAAX;AAAA,uCACjBD,SAASE,MAAT,CAAgBD,IAAhB,CADiB;AAAA,6BAAd,EACoB,EADpB,EAEFE,IAFE,CAEG,UAACC,OAAD,EAAUC,OAAV;AAAA,uCAAsBA,QAAQhB,IAAR,CAAaiB,OAAb,KAAyBF,QAAQf,IAAR,CAAaiB,OAAb,EAA/C;AAAA,6BAFH,CAAP;AAGH,yBATD,CASE,OAAOd,KAAP,EAAc;AACZe,oCAAQC,GAAR,CAAYC,GAAZ;AACA,kCAAM,IAAI/B,oBAAJ,CAAyB,0CAAzB,CAAN;AACH;AAb+B;AAcnC;AAzC4B","file":"NegotiationService.js","sourcesContent":["import { HttpService } from '../../util/HttpService.js';\nimport { Negotiation } from './Negotiation.js';\nimport { ApplicationException } from '../../util/ApplicationException.js';\n\nexport class NegotiantionService {\n\n    constructor() {\n        this._httpService = new HttpService();\n    }\n\n    getWeekNegotiations() {\n        return this._httpService.get('negotiations/week')\n            .then(datas =>\n                datas.map(object => new Negotiation(new Date(object.date), object.quantity, object.value))\n                , error => { throw new ApplicationException(\"Couldn't get week negotiations\") })\n    }\n\n    getPreviousWeekNegotiations() {\n        return this._httpService.get('negotiations/previous')\n            .then(datas =>\n                datas.map(object => new Negotiation(new Date(object.date), object.quantity, object.value))\n                , error => { throw new ApplicationException(\"Couldn't get previous week negotiations\") });\n    }\n\n    getDelayedWeekNegotiations() {\n        return this._httpService.get('negotiations/delayed')\n            .then(datas =>\n                datas.map(object => new Negotiation(new Date(object.date), object.quantity, object.value))\n                , error => { throw new ApplicationException(\"Couldn't get delayed week negotiations\") });\n    }\n\n    async getNegotiationsForThePeriod() {\n        try {\n            let period = await Promise.all([\n                this.getWeekNegotiations(),\n                this.getPreviousWeekNegotiations(),\n                this.getDelayedWeekNegotiations()\n            ]);\n            return period.reduce((newArray, item) =>\n                newArray.concat(item), [])\n                .sort((object1, object2) => object2.date.getTime() - object1.date.getTime());\n        } catch (error) {\n            console.log(err);\n            throw new ApplicationException(\"Couldn't get negotiations for the period\");\n        }\n    }\n}"]}