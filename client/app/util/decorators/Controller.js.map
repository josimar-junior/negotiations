{"version":3,"sources":["../../../app-src/util/decorators/Controller.js"],"names":["controller","selectors","elements","map","selector","document","querySelector","constructor","originalConstructor","newConstructor","instance","Object","getOwnPropertyNames","prototype","forEach","property","Reflect","hasMetadata","associateEvent","getMetadata","metadata","addEventListener","event","prevent","preventDefault","key"],"mappings":";;;AAAO,aAASA,UAAT,CAAoB,GAAGC,SAAvB,EAAkC;;AAErC,cAAMC,WAAWD,UAAUE,GAAV,CAAcC,YAAYC,SAASC,aAAT,CAAuBF,QAAvB,CAA1B,CAAjB;;AAEA,eAAO,UAASG,WAAT,EAAsB;AACzB,kBAAMC,sBAAsBD,WAA5B;AACA,kBAAME,iBAAiB,YAAW;AAC9B,sBAAMC,WAAW,IAAIF,mBAAJ,CAAwB,GAAGN,QAA3B,CAAjB;AACAS,uBAAOC,mBAAP,CAA2BJ,oBAAoBK,SAA/C,EAA0DC,OAA1D,CAAkEC,YAAY;AAC1E,wBAAGC,QAAQC,WAAR,CAAoB,WAApB,EAAiCP,QAAjC,EAA2CK,QAA3C,CAAH,EAAyD;AACrDG,uCAAeR,QAAf,EAAyBM,QAAQG,WAAR,CAAoB,WAApB,EAAiCT,QAAjC,EAA2CK,QAA3C,CAAzB;AACH;AACJ,iBAJD;AAKH,aAPD;AAQAN,2BAAeI,SAAf,GAA2BL,oBAAoBK,SAA/C;AACA,mBAAOJ,cAAP;AACH,SAZD;AAaH;;0BAjBeT,U;;AAmBhB,aAASkB,cAAT,CAAwBR,QAAxB,EAAkCU,QAAlC,EAA4C;AACxCf,iBAASC,aAAT,CAAuBc,SAAShB,QAAhC,EACKiB,gBADL,CACsBD,SAASE,KAD/B,EACsCA,SAAS;AACvC,gBAAGF,SAASG,OAAZ,EACID,MAAME,cAAN;AACJd,qBAASU,SAASK,GAAlB,EAAuBH,KAAvB;AACH,SALL;AAMH","file":"Controller.js","sourcesContent":["export function controller(...selectors) {\n\n    const elements = selectors.map(selector => document.querySelector(selector));\n\n    return function(constructor) {\n        const originalConstructor = constructor;\n        const newConstructor = function() {\n            const instance = new originalConstructor(...elements);\n            Object.getOwnPropertyNames(originalConstructor.prototype).forEach(property => {\n                if(Reflect.hasMetadata('bindEvent', instance, property)) {\n                    associateEvent(instance, Reflect.getMetadata('bindEvent', instance, property));\n                }\n            });\n        }\n        newConstructor.prototype = originalConstructor.prototype;\n        return newConstructor;\n    }\n}\n\nfunction associateEvent(instance, metadata) {\n    document.querySelector(metadata.selector)\n        .addEventListener(metadata.event, event => {\n            if(metadata.prevent)\n                event.preventDefault();\n            instance[metadata.key](event);\n        })\n}"]}